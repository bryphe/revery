<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<link rel="stylesheet" data-name="vs/editor/editor.main" href="node_modules/monaco-editor/min/vs/editor/editor.main.css">
</head>
<body style="margin: 0px;">

<script>
window.addEventListener("message", (evt) => {
    alert("message: " + evt.data);
}, false);
</script>

<div style="display: flex; flex-direction: row; position: absolute; top: 0; left: 0; right: 0; bottom: 0;">
<div id="code" style="flex: 2;overflow: hidden;"></div>
<div id="example" style="flex: 3; background-color: red;">
    <iframe src="host/index.html" style="border: 0; width: 100%; height: 100%"></iframe>
</div>
</div>

<script>var require = { paths: { 'vs': 'node_modules/monaco-editor/min/vs' } };</script>
<script src="node_modules/monaco-editor/min/vs/loader.js"></script>
<script src="node_modules/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
<script src="node_modules/monaco-editor/min/vs/editor/editor.main.js"></script>

<script>
	var editor = monaco.editor.create(document.getElementById('code'), {
		value: [
			'let a = 1;',
            'let test = (a) => 2;',
		].join('\n'),
		language: 'rust',
        theme: 'vs-dark',
        readOnly: true,
	});

    fetch("sources/Hello.re")
        .then((response) => {
           alert("responded!"); 

            response.text().then((t) => {
                editor.setValue(t);
            });
        });
</script>

</body>
</html>
